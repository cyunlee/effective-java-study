## item 12

### toString을 항상 재정의하라

---

### 🙋‍♀️ 왜 재정의하는 게 좋은가요?

기본적인 `Object`의 `toString` 메서드를 사용한다면, 우리가 원하는 대로 문자열을 보통 반환하지 않는 다는 것을 알 수 있습니다.
`PhoneNumber@abdbd` 처럼 `클래스_이름@16진수로_표시한_해시코드`를 반환할 뿐입니다. 

그래서 우리는 `toString` 일반 규약에 따라 `간결하면서 사람이 읽기 쉬운 형태의 유익한 정보`를 반환해줘야 합니다.
또한 이는 `모든 하위 클래스에서 이 메서드를 재정의하라` 라고 표현될만큼 매우 강조되고 있습니다.

결국 재정의를 하게 되면, 해당 클래스를 사용할 때`즐겁고, 디버깅하기 쉽`습니다.

#### 예시 1) 오류 메세지 로깅
우리가 작성한 객체를 참조하는 컴포넌트가 오류 메세지를 로깅할 때 `toString`은 자동으로 호출될 수 있습니다.
이때 보다 쉽게 파악하기 위해 `toString`을 정의해둔다면 `보다 의미있는 메세지를 얻어갈 것`이기에 재정의하는 게 좋습니다.

대부분 프로그래머들은 진단 메시지를 
```java
System.out.println(phoneNumber + "에 연결할 수 없습니다.");
```
해당 방식으로 작성하게 됩니다. 재정의를 하지 않았다면 의미없는 메세지를 보게 되는 것입니다.

#### 예시 2) 해당 객체를 포함하는 상황에서 출력을 진행
이 객체를 포함하는 상황(ex `map 객체`)에 출력을 할 때 보다 의미있게 쓰이게 됩니다.
`{Jenny=PhoneNumber@abdbd}`가 아닌 `{Jenny=707-867-5309}` 라는 의미있는 정보를 받게 될테니 말입니다.

---

### 🙋‍♀️ 그렇다면 어떻게 toString을 재정의해야 하나요?

#### 1) 객체가 가진 주요 정보 모두를 반환하는 게 좋습니다.
#### 2) `객체가 거대`하거나 `객체의 상태를 문자열로 표현하는 게 적합하지 않`다면 요약 정보를 담아서 합니다.
#### 3) 반환값을 문서화할지 정합니다.

---

### 🙋‍♀️ 문서화할지 어떻게 정하나요?

#### 1) 문서화의 장점
표준적이고, 명확하고, 사람이 읽을 수 있게 됩니다. 
그렇기에 `그대로 입출력에 사용`하거나 `데이터 객체로 저장`하며 사용할 수 있습니다.

따라서 문서화를 할것이라면, 명시한 포맷에 맞는 문자열과 객체를 상호 전환할 수 있는 
`정적 팩터리`나 `생성자`를 함께 제공해주면 좋습니다.

#### 2) 문서화의 단점
따라서 당연히 단점은 평생 그 포맷에 얽히게 된다는 점입니다.

#### 결론 
그렇기에 명시하던 아니던, 의도는 명확히 밝혀야 합니다. 
포맷을 명시하려면, 아주 정확히, 포맷을 명시하지 않기로 했다면 `형식은 정해지지 않았으며 향후 변경될 수 있다`라는 문구를 추가해 명확히 달라질 수 있음을 이야기해야한다.

### 🙌 주의점

#### 1) 문서화 여부와 상관없이 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하는 게 좋습니다.
포맷이 되었다고 해서 해당 값에 접근할 수 있는 `getter` 가 없어서 `toString`에서 값을 파싱하는 건 성능이 나빠지고 필요하지도 않은 작업입니다.
향후 포맷이 변경되면 이는 시스템이 망가지는 결과를 초래하기에 `getter`를 지원해주는 게 중요합니다.

#### 2) 정적 유틸리티 클래스는 toString 제공할 필요 X
#### 3) 대부분의 열거 타입도 자바가 이미 완벽한 toString 제공하니 따로 제공할 필요 X
#### 4) 상위 클래스에서 이미 잘 재정의된 toString 이 있다면 제공할 필요 X
#### 5) 다만!! 하위 클래스들이 공유해야할 문자열 표현이 있는 추상 클래스에선 정의 필요!!
#### 6) AutoValue 프레임워크는 toString을 생성해주지만, 클래스의 의미가 중요한 경우 사용하지 않는 것이 좋음(ex PhoneNumber는 형식에 맞춰 반환 필요 / Potion은 자동 생성에 적합)
